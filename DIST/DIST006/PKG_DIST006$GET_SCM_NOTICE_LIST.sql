CREATE DEFINER=`root`@`%` PROCEDURE `swmcp`.`PKG_DIST006$GET_SCM_NOTICE_LIST`(	
	IN A_COMP_ID VARCHAR(10),
	IN A_ST_DATE TIMESTAMP,
	IN A_ED_DATE TIMESTAMP,
	IN A_NOTICE_GUBN VARCHAR(3),
	OUT N_RETURN INT,
	OUT V_RETURN VARCHAR(4000)
	)
begin
	DECLARE EXIT HANDLER FOR SQLEXCEPTION 
	CALL USP_SYS_GET_ERRORINFO_ALL(V_RETURN, N_RETURN); 

	
	select
		  A.COMP_ID
		  ,STR_TO_DATE(A.SET_DATE, '%Y%m%d') as SET_DATE
		  ,A.SET_SEQ
		  ,A.NOTICE_MST_KEY
		  ,A.NOTICE_GUBN
		  ,A.NOTICE_TITLE
		  ,A.NOTICE_COMMENT
		  ,A.NOTICE_EMP_NO
		  ,(select KOR_NAME
			  from INSA_MST
			 where EMP_NO = A.NOTICE_EMP_NO) as NOTICE_EMP_NAME
	from TB_SCM_NOTICE A
	where A.COMP_ID = A_COMP_ID
	  and A.SET_DATE between DATE_FORMAT(A_ST_DATE, '%Y%m%d')
					     and DATE_FORMAT(A_ED_DATE, '%Y%m%d')
	  and A.NOTICE_GUBN = A_NOTICE_GUBN
	;


	SET N_RETURN = 0;
    SET V_RETURN = '조회되었습니다.';
end